<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Galeon: Mapas de entidades lógicas</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Galeon
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Página&#160;principal</span></a></li>
      <li><a href="pages.html"><span>Páginas&#160;relacionadas</span></a></li>
      <li class="current"><a href="modules.html"><span>Módulos</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Estructuras&#160;de&#160;Datos</span></a></li>
      <li><a href="files.html"><span>Archivos</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Estructuras de datos</a>  </div>
  <div class="headertitle">
<div class="title">Mapas de entidades lógicas</div>  </div>
</div><!--header-->
<div class="contents">

<p>Las entidades de la capa lógica (ver <a class="el" href="group__entity_group.html">Entidades en la lógica de juego</a>) se organizan en mapas lógicos.  
<a href="#details">Más...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Diagrama de colaboración para Mapas de entidades lógicas:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="group__map_group.png" border="0" alt="" usemap="#group____map__group"/>
<map name="group____map__group" id="group____map__group">
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Estructuras de datos</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_logic_1_1_c_component_factory.html">Logic::CComponentFactory</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factoría de componentes.  <a href="class_logic_1_1_c_component_factory.html#details">Más...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_logic_1_1_c_entity_factory.html">Logic::CEntityFactory</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factoría de <a class="el" href="class_logic_1_1_c_entity.html" title="Clase que representa una entidad en el entorno virtual. ">CEntity</a> que centraliza tanto la construcción como la destrucción de entidades del juego.  <a href="class_logic_1_1_c_entity_factory.html#details">Más...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_logic_1_1_entity_i_d.html">Logic::EntityID</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clase que gestiona la generación de nuevos identificadores.  <a href="class_logic_1_1_entity_i_d.html#details">Más...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_logic_1_1_c_map.html">Logic::CMap</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clase que representa un mapa lógico.  <a href="class_logic_1_1_c_map.html#details">Más...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_map_1_1_c_entity.html">Map::CEntity</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clase que representa una entidad leida del fichero del mapa.  <a href="class_map_1_1_c_entity.html#details">Más...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripción detallada</h2>
<p>Las entidades de la capa lógica (ver <a class="el" href="group__entity_group.html">Entidades en la lógica de juego</a>) se organizan en mapas lógicos. </p>
<p>Así pues, la clase <a class="el" href="class_logic_1_1_c_map.html" title="Clase que representa un mapa lógico. ">Logic::CMap</a> se encarga de almacenar todas las entidades del mapa, tanto aquellas que tienen representación gráfica y se ven como entidades puramente lógicas. </p>
<p>El mapa de entidades es el responsable de gestionar la activación y desactivación de éstas. Tiene un método de actualización <a class="el" href="class_logic_1_1_c_map.html#ae54ec30c9649fa52e7e0069a213a83e3" title="Función llamada en cada frame para que se realicen las funciones de actualización adecuadas...">Logic::CMap::tick()</a> que se encarga de actualizar todas las entidades y tiene también métodos para recuperar entidades, tanto por su nombre como por su tipo y por su identificador. </p>
<p>Para la generación y adición de entidades a un mapa se dispone de una factoría de entidades <a class="el" href="class_logic_1_1_c_entity_factory.html" title="Factoría de CEntity que centraliza tanto la construcción como la destrucción de entidades del juego...">Logic::CEntityFactory</a> que es la única instancia que puede crear o destruir entidades. Para poder crear entidades, en esta factoría se cargan las definiciones blueprints de las entidades. El fichero que contiene la definición es muy simple. Cada línea corresponde a una entidad que viene definida por una serie de palabras separadas por espacios donde la primera palabra es el tipo de la entidad y el resto son los componentes que conforman dicha entidad:</p>
<div class="fragment"><div class="line">...</div><div class="line">Player CAvatarController CAnimatedGraphics</div><div class="line">...</div></div><!-- fragment --><p>En la línea anterior estaríamos definiendo la entidad tipo <code>Player</code> que consta de dos componentes <code>CAvatarController</code> y <code>CAnimatedGraphics</code>. </p>
<p>Una vez se han cargado las definiciones de entidades del fichero o ficheros blueprints, se pueden crear entidades en un mapa. Para el ensamblaje de la entidad se usa la factoría de componentes <a class="el" href="class_logic_1_1_c_component_factory.html" title="Factoría de componentes. ">Logic::CComponentFactory</a> y tras añadir la entidad al mapa se inicializa. </p>
<p><a class="el" href="class_logic_1_1_c_entity_factory.html" title="Factoría de CEntity que centraliza tanto la construcción como la destrucción de entidades del juego...">Logic::CEntityFactory</a> es también responsable de la destrucción de entidades de un mapa, pero la destrucción de una entidad en medio de un tick() del mapa lógico es potencialmente peligrosa, ya que no se sabe si otras entidades tendrán acceso a la entidad, si la propia entidad se encuentra en medio de su actualización, etc. Es por ello que se recomienda hacer uso de la función <a class="el" href="class_logic_1_1_c_entity_factory.html#a9619ffb7838fbb91e0eff23db74cc032" title="Solicita la destrucción retrasada de la entidad que se pasa como parámetro. ">Logic::CEntityFactory::deferredDeleteEntity()</a> que en vez de destruir la entidad al instante espera a que se invoque <a class="el" href="class_logic_1_1_c_entity_factory.html#abc1de7ec795ddcffb8ebb07dd67d1070" title="Método invocado por el bucle del juego para que la factoría elimine todos los objetos pendientes de s...">Logic::CEntityFactory::deleteDefferedEntities()</a> antes del siguiente tick() del mapa para destruir todas las entidades pendientes de destruir. </p>
<p>Para simplificar la taréa de generar un nivel a partir de un fichero con una descripción de mapa existe la función estática <a class="el" href="class_logic_1_1_c_map.html#a78c93d843a8476efee42030e2767c025" title="Método factoría que carga un mapa de fichero. ">Logic::CMap::createMapFromFile()</a>. Para ello se ayuda del parseador de mapas (ver <a class="el" href="group__map_parser_group.html">Parseador de ficheros de mapas</a>) que parsea un fichero generando una estructura tipo lista con la descripción de todas las entidades del mapa. Una vez se tienen todas las descripciones de entidades se usa la factoría de entidaes para generar e inicializar todas las añadiéndolas al mapa que devuelve la función.</p>
<dl class="section author"><dt>Autor</dt><dd>David Llansó </dd></dl>
<dl class="section date"><dt>Fecha</dt><dd>Septiembre, 2010 </dd></dl>
</div><!-- contents -->
<hr size="1"/>
<address style="text-align: left;"><small>
David Llansó, Marco Antonio Gómez Martín.<p/>
(c) <a href="http://www.videojuegos-ucm.es/">Master en Desarrollo de Videojuegos</a>, <a href="http://www.ucm.es">UCM</a>.<p/>
Documentación generada con <a href="http://www.doxygen.org/index.html">Doxygen</a>
</small></address>
